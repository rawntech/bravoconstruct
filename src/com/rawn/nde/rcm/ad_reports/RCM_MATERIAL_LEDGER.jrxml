<?xml version="1.0" encoding="UTF-8"  ?>
<!-- Created with iReport - A designer for JasperReports -->
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd">
<jasperReport
		 name="RCM_MATERIAL_LEDGER"
		 columnCount="1"
		 printOrder="Vertical"
		 orientation="Landscape"
		 pageWidth="842"
		 pageHeight="595"
		 columnWidth="782"
		 columnSpacing="0"
		 leftMargin="30"
		 rightMargin="30"
		 topMargin="20"
		 bottomMargin="20"
		 whenNoDataType="NoPages"
		 isTitleNewPage="false"
		 isSummaryNewPage="false">
	<property name="ireport.scriptlethandling" value="0" />
	<property name="ireport.encoding" value="UTF-8" />
	<import value="java.util.*" />
	<import value="net.sf.jasperreports.engine.*" />
	<import value="net.sf.jasperreports.engine.data.*" />

	<parameter name="SUBREPORT_DIR" isForPrompting="true" class="java.lang.String">
		<defaultValueExpression ><![CDATA["./"]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREP_RCM_MATERIAL_LEDGER_subreport0" isForPrompting="false" class="net.sf.jasperreports.engine.JasperReport"/>
	<queryString><![CDATA[select client, m_product_id, organization, product, unit, date as receivedate, mrrno, quantity as receivequantity, rate as receiveunitrate,  null remarks
from(
select c.name as client, org.name as organization, p.name as product, u.name as unit, t.movementdate as date, i.documentno as mrrno, p.m_product_id,
sum(t.movementqty) as quantity, avg(t.transactioncost/ t.movementqty) rate
from ad_client c, m_inout i, m_transaction t, ad_org org, m_product p, c_uom u
where c.ad_client_id=i.ad_client_id
and i.ad_client_id=t.ad_client_id
and t.ad_client_id=org.ad_client_id
and p.ad_client_id=u.ad_client_id
and i.ad_org_id=org.ad_org_id
and t.ad_org_id=org.ad_org_id
and t.ad_client_id='F566B653BBFF417AB00F88941061033E'
and p.c_uom_id=u.c_uom_id
and t.m_product_id=p.m_product_id
and t.c_uom_id=u.c_uom_id
and p.ad_org_id=org.ad_org_id
group by c.name, p.m_product_id, p.name, u.name, org.name, t.movementdate, i.documentno) as reveive
order by mrrno]]></queryString>

	<field name="client" class="java.lang.String"/>
	<field name="M_Product_ID" class="java.lang.String"/>
	<field name="organization" class="java.lang.String"/>
	<field name="product" class="java.lang.String"/>
	<field name="unit" class="java.lang.String"/>
	<field name="receivedate" class="java.sql.Timestamp"/>
	<field name="mrrno" class="java.lang.String"/>
	<field name="receivequantity" class="java.math.BigDecimal"/>
	<field name="receiveunitrate" class="java.math.BigDecimal"/>
	<field name="remarks" class="java.lang.String"/>

	<variable name="rowcount" class="java.lang.Integer" resetType="Report" calculation="Count">
		<variableExpression><![CDATA[$V{rowcount}]]></variableExpression>
	</variable>
		<background>
			<band height="0"  isSplitAllowed="true" >
			</band>
		</background>
		<title>
			<band height="32"  isSplitAllowed="true" >
			</band>
		</title>
		<pageHeader>
			<band height="130"  isSplitAllowed="true" >
				<staticText>
					<reportElement
						x="693"
						y="1"
						width="60"
						height="26"
						key="staticText-3"/>
					<box></box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font pdfFontName="Helvetica" size="12" isBold="false"/>
					</textElement>
				<text><![CDATA[Page No:]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="352"
						y="100"
						width="135"
						height="25"
						key="staticText-6"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font pdfFontName="Helvetica-Bold" size="12" isBold="true"/>
					</textElement>
				<text><![CDATA[MATERIAL LEDGER]]></text>
				</staticText>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="1"
						width="255"
						height="26"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font pdfFontName="Helvetica-Bold" size="12" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{client}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="355"
						y="1"
						width="180"
						height="26"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font pdfFontName="Helvetica-Bold" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Project: " + $F{organization}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="34"
						width="206"
						height="26"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font pdfFontName="Helvetica-Bold" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Name of Material: " + $F{product}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="0"
						y="68"
						width="100"
						height="26"
						key="textField"/>
					<box></box>
					<textElement verticalAlignment="Middle">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA["Unit : " + $F{unit}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="753"
						y="1"
						width="29"
						height="26"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font pdfFontName="Helvetica-Bold" size="12" isBold="true"/>
					</textElement>
				<textFieldExpression   class="java.lang.Integer"><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
				</textField>
			</band>
		</pageHeader>
		<columnHeader>
			<band height="91"  isSplitAllowed="true" >
				<staticText>
					<reportElement
						x="30"
						y="0"
						width="58"
						height="91"
						key="staticText-7"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Date]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="552"
						y="0"
						width="126"
						height="29"
						key="staticText-8"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Adjustment ( Surplus/ Shortage)]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="427"
						y="0"
						width="126"
						height="29"
						key="staticText-9"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Issued]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="87"
						y="0"
						width="172"
						height="29"
						key="staticText-10"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Received]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="259"
						y="0"
						width="126"
						height="29"
						key="staticText-11"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Transferred]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="384"
						y="0"
						width="44"
						height="91"
						key="staticText-12"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Net Received Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="678"
						y="0"
						width="47"
						height="91"
						key="staticText-13"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Balance 
Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="725"
						y="0"
						width="57"
						height="91"
						key="staticText-14"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Remarks]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="87"
						y="28"
						width="61"
						height="63"
						key="staticText-15"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[MRR No.]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="147"
						y="28"
						width="29"
						height="63"
						key="staticText-16"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="222"
						y="28"
						width="38"
						height="63"
						key="staticText-17"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Cumulative
Received 
Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="176"
						y="28"
						width="47"
						height="63"
						key="staticText-18"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Unit
Rate]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="259"
						y="28"
						width="61"
						height="63"
						key="staticText-19"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[MTR No.]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="319"
						y="28"
						width="28"
						height="63"
						key="staticText-20"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="347"
						y="28"
						width="38"
						height="63"
						key="staticText-21"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Cumulative 
Transferred
Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="427"
						y="28"
						width="61"
						height="63"
						key="staticText-22"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[SIR No.]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="487"
						y="28"
						width="28"
						height="63"
						key="staticText-23"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="515"
						y="28"
						width="38"
						height="63"
						key="staticText-24"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Cumulative 
Issued
Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="552"
						y="28"
						width="61"
						height="63"
						key="staticText-25"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[MRN No.]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="612"
						y="28"
						width="29"
						height="63"
						key="staticText-26"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						x="640"
						y="28"
						width="38"
						height="63"
						key="staticText-27"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[Cumulative 
Quantity]]></text>
				</staticText>
				<staticText>
					<reportElement
						mode="Opaque"
						x="0"
						y="0"
						width="30"
						height="91"
						forecolor="#FFFFFF"
						backcolor="#999999"
						key="staticText-28"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<text><![CDATA[S L]]></text>
				</staticText>
			</band>
		</columnHeader>
		<detail>
			<band height="18"  isSplitAllowed="true" >
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						mode="Opaque"
						x="0"
						y="0"
						width="30"
						height="18"
						forecolor="#FFFFFF"
						backcolor="#CCCCCC"
						key="textField-1"/>
					<box>					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.Integer"><![CDATA[$V{rowcount}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="dd-MMM-yy" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="30"
						y="0"
						width="58"
						height="18"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<textFieldExpression   class="java.sql.Timestamp"><![CDATA[$F{receivedate}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="###0" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="87"
						y="0"
						width="61"
						height="18"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{mrrno}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="###0;###0-" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="147"
						y="0"
						width="29"
						height="18"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[$F{receivequantity}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="false" pattern="###0.00;###0.00-" isBlankWhenNull="true" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="176"
						y="0"
						width="47"
						height="18"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<textFieldExpression   class="java.math.BigDecimal"><![CDATA[$F{receiveunitrate}]]></textFieldExpression>
				</textField>
				<subreport  isUsingCache="true">
					<reportElement
						x="259"
						y="0"
						width="88"
						height="18"
						key="subreport-1"/>
					<subreportParameter  name="M_Product_ID">
						<subreportParameterExpression><![CDATA[$F{M_Product_ID}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter  name="NUMBERFORMAT">
						<subreportParameterExpression><![CDATA[org.openbravo.erpCommon.utility.Utility.applyCountryDateFormat($F{receivedate},$F{client})]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression  class="net.sf.jasperreports.engine.JasperReport"><![CDATA[$P{SUBREP_RCM_MATERIAL_LEDGER_subreport0}]]></subreportExpression>
				</subreport>
				<textField isStretchWithOverflow="false" isBlankWhenNull="false" evaluationTime="Now" hyperlinkType="None"  hyperlinkTarget="Self" >
					<reportElement
						x="725"
						y="0"
						width="57"
						height="18"
						key="textField"/>
					<box></box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font/>
					</textElement>
				<textFieldExpression   class="java.lang.String"><![CDATA[$F{remarks}]]></textFieldExpression>
				</textField>
			</band>
		</detail>
		<columnFooter>
			<band height="30"  isSplitAllowed="true" >
			</band>
		</columnFooter>
		<pageFooter>
			<band height="50"  isSplitAllowed="true" >
			</band>
		</pageFooter>
		<lastPageFooter>
			<band height="50"  isSplitAllowed="true" >
			</band>
		</lastPageFooter>
		<summary>
			<band height="50"  isSplitAllowed="true" >
			</band>
		</summary>
</jasperReport>
